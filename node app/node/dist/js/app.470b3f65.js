(function(t){function e(e){for(var s,a,i=e[0],u=e[1],c=e[2],l=0,d=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(t[s]=u[s]);f&&f(e);while(d.length)d.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],s=!0,i=1;i<r.length;i++){var u=r[i];0!==o[u]&&(s=!1)}s&&(n.splice(e--,1),t=a(a.s=r[0]))}return t}var s={},o={app:0},n=[];function a(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=s,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(r,s,function(e){return t[e]}.bind(null,s));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var f=u;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("85ec")},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},n=[],a=r("5530"),i=r("2f62"),u={name:"App",methods:Object(a["a"])({},Object(i["b"])(["load_users","load_foods","load_locations"])),mounted:function(){this.load_users(),this.load_foods(),this.load_locations()}},c=u,f=(r("034f"),r("2877")),l=Object(f["a"])(c,o,n,!1,null,null,null),d=l.exports,m=r("5f5b"),h=r("b1e0"),p=(r("f9e3"),r("2dd8"),r("8c4f")),b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("Header",{attrs:{activeUser:t.activeUser,foods:t.foods}}),r("b-container",[r("b-row",[r("b-col",{attrs:{cm:"6"}},[t._v(" MENI "),t.foods.length?r("FoodList",{attrs:{foods:t.foods,activeUser:t.activeUser}}):t._e()],1),r("b-col",{attrs:{cm:"6"}},[t._v(" LOKACIJE "),t.locations.length?r("LocationList",{attrs:{locations:t.locations}}):t._e()],1)],1)],1)],1)},v=[],_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.foods,(function(e){return r("li",{key:e.id},[r("b-card",{staticClass:"overflow-hidden",staticStyle:{"max-width":"540px"},attrs:{"no-body":"","footer-tag":"footer"},scopedSlots:t._u([{key:"footer",fn:function(){return[r("b-form-rating",{model:{value:e.ocena,callback:function(r){t.$set(e,"ocena",r)},expression:"food.ocena"}}),r("p",{staticClass:"mt-2"},[t._v("Ocena: "+t._s(e.ocena))])]},proxy:!0}],null,!0)},[r("b-row",{attrs:{"no-gutters":""}},[r("b-col",{attrs:{md:"6"}},[r("b-card-img",{staticClass:"rounded-0",attrs:{src:e.slika,alt:"Image"}})],1),r("b-col",{attrs:{md:"6"}},[r("b-card-body",{attrs:{title:e.naziv}},[r("b-card-text",[t._v(" "+t._s(e.komentar)+" ")]),r("b-card-text",[t._v(" "+t._s(e.cena)+"$ ")]),r("b-button",{attrs:{variant:"primary"},on:{click:function(e){t.activeUser.orders+=1}}},[t._v("Naruci")])],1)],1)],1)],1)],1)})),0)},g=[],y={name:"FoodList",props:{foods:Array,activeUser:{}}},w=y,j=Object(f["a"])(w,_,g,!1,null,null,null),O=j.exports,x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.locations,(function(e){return r("li",{key:e.id},[r("b-card",{staticClass:"overflow-hidden",staticStyle:{"max-width":"540px"},attrs:{"no-body":"","footer-tag":"footer"}},[r("b-row",{attrs:{"no-gutters":""}},[r("b-col",{attrs:{md:"6"}},[r("b-card-img",{staticClass:"rounded-0",attrs:{src:e.slika,alt:"Image"}})],1),r("b-col",{attrs:{md:"6"}},[r("b-card-body",{attrs:{title:e.naziv}},[r("b-card-text",[t._v(" Adresa: "+t._s(e.adresa)+" ")]),r("b-card-text",[t._v(" Telefon: "+t._s(e.telefon)+" ")])],1)],1)],1)],1)],1)})),0)},k=[],U={name:"LocationList",props:{locations:Array}},S=U,E=Object(f["a"])(S,x,k,!1,null,null,null),$=E.exports,L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-jumbotron",{attrs:{header:"Dingo",lead:"Restoran za narucivanje hrane"}},[r("p",[t._v("Dobrodosao "+t._s(t.activeUser.first_name)+"!")]),r("p",[t._v("Orders: "+t._s(t.activeUser.orders))]),r("b-button",{attrs:{variant:"primary"},on:{click:t.logout}},[t._v("Logout")])],1)],1)},P=[],R={name:"Header",props:{activeUser:{},foods:Array},methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])(["change_user","change_food"])),{},{logout:function(){this.activeUser.is_active=!1;var t=JSON.stringify({is_active:this.activeUser.is_active,orders:this.activeUser.orders});this.change_user({id:this.activeUser.id,msg:t});for(var e=0;e<this.foods.length;e++){var r=JSON.stringify({ocena:this.foods[e].ocena});this.change_food({id:this.foods[e].id,msg:r})}ht.push({path:"/"})}})},C=R,F=Object(f["a"])(C,L,P,!1,null,null,null),A=F.exports,N={name:"Home",components:{LocationList:$,FoodList:O,Header:A},data:function(){return{activeUser:{}}},computed:Object(a["a"])({},Object(i["c"])(["users","foods","locations"])),methods:Object(a["a"])({},Object(i["b"])(["load_users","load_foods","load_locations"])),mounted:function(){for(var t=0;t<this.users.length;t++)this.users[t].is_active&&(this.activeUser=this.users[t])},updated:function(){for(var t=0;t<this.users.length;t++)this.users[t].is_active&&(this.activeUser=this.users[t])}},q=N,J=(r("cccb"),Object(f["a"])(q,b,v,!1,null,null,null)),T=J.exports,D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("b-container",[r("b-row",[r("b-col",{attrs:{cm:"6"}},[t.users.length?r("LoginForm",{attrs:{users:t.users}}):t._e()],1)],1)],1)],1)},I=[],H=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[r("b-form-group",{attrs:{label:"Username:"}},[r("b-form-input",{attrs:{placeholder:"Enter username"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),r("label",{attrs:{for:"text-password"}},[t._v("Password")]),r("b-form-input",{attrs:{type:"password",placeholder:"Enter password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._l(t.errors,(function(e){return r("li",{key:e},[t._v(t._s(e))])})),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),r("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Reset")]),r("b-button",{attrs:{variant:"primary",href:"/register"}},[t._v("Register")])],2)],1)},M=[],z=r("279c"),K=r.n(z),B={props:{users:Array},data:function(){return{errors:[],form:{username:"",password:""},show:!0}},methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])(["change_user"])),{},{onSubmit:function(t){var e=this;if(this.found=!1,this.user=null,this.errors=[],""===this.form.username)this.errors.push("Username required.");else if(""===this.form.password)this.errors.push("Password required.");else{for(var r=function(t){if(e.users[t].username===e.form.username){var r=e.users[t].password;K.a.compare(e.form.password,r,(function(r,s){if(!0===s){e.found=!0,e.user=e.users[t],e.user.is_active=!0;var o=JSON.stringify({is_active:e.user.is_active,orders:e.user.orders});e.change_user({id:e.user.id,msg:o}),ht.push({path:"/home"})}}))}},s=0;s<this.users.length;s++)r(s);!1===this.found&&this.errors.push("Username or password does not exists")}t.preventDefault()},onReset:function(t){t.preventDefault(),this.form.username="",this.form.password=""}})},G=B,Q=Object(f["a"])(G,H,M,!1,null,null,null),V=Q.exports,W={name:"Login",components:{LoginForm:V},computed:Object(a["a"])({},Object(i["c"])(["users"])),methods:Object(a["a"])({},Object(i["b"])(["load_users"]))},X=W,Y=Object(f["a"])(X,D,I,!1,null,null,null),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("b-container",[r("b-row",[r("b-col",{attrs:{cm:"6"}},[t.users.length?r("RegisterForm",{attrs:{users:t.users}}):t._e()],1)],1)],1)],1)},et=[],rt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[r("b-form-group",{attrs:{label:"Username:"}},[r("b-form-input",{attrs:{placeholder:"Enter username"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),r("label",{attrs:{for:"text-password"}},[t._v("Password")]),r("b-form-input",{attrs:{type:"password",placeholder:"Enter password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),r("b-form-group",{attrs:{label:"First Name:"}},[r("b-form-input",{attrs:{placeholder:"Enter first name"},model:{value:t.form.first,callback:function(e){t.$set(t.form,"first",e)},expression:"form.first"}})],1),r("b-form-group",{attrs:{label:"Last Name:"}},[r("b-form-input",{attrs:{placeholder:"Enter last name"},model:{value:t.form.last,callback:function(e){t.$set(t.form,"last",e)},expression:"form.last"}})],1),r("b-form-group",{attrs:{label:"Email address:"}},[r("b-form-input",{attrs:{type:"email",placeholder:"Enter email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._l(t.errors,(function(e){return r("li",{key:e},[t._v(t._s(e))])})),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),r("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Reset")]),r("b-button",{attrs:{variant:"primary",href:"/"}},[t._v("Login")])],2)],1)},st=[],ot={props:{users:Array},data:function(){return{errors:[],form:{username:"",password:"",first:"",last:"",email:"",is_active:!1,orders:0,is_superuser:!1}}},methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])(["new_user"])),{},{onSubmit:function(t){this.ok=!1,this.errors=[],""===this.form.username?this.errors.push("Username required."):""===this.form.password?this.errors.push("Password required."):this.form.password.length>20?this.errors.push("Password too long."):""===this.form.first?this.errors.push("First name required."):""===this.form.last?this.errors.push("Last name required."):""===this.form.email?this.errors.push("Email required."):this.form.username.length<4?this.errors.push("Username too short"):this.form.username.length>12?this.errors.push("Username too long"):this.ok=!0;for(var e=0;e<this.users.length;e++)if(this.form.username===this.users[e].username){this.errors.push("Username is already used."),this.ok=!1;break}if(this.ok){var r;r=this.encryptPassword(this.form.password);var s=JSON.stringify({username:this.form.username,password:r,first_name:this.form.first,last_name:this.form.last,email:this.form.email,is_active:this.form.is_active,orders:this.form.orders,is_superuser:this.form.is_superuser});this.new_user(s),ht.push({path:"/"})}else t.preventDefault()},encryptPassword:function(t){var e=K.a.genSaltSync(10);return K.a.hashSync(t,e)},onReset:function(t){t.preventDefault(),this.form.username="",this.form.password="",this.form.first="",this.form.last="",this.form.email=""}})},nt=ot,at=Object(f["a"])(nt,rt,st,!1,null,null,null),it=at.exports,ut={name:"Register",components:{RegisterForm:it},computed:Object(a["a"])({},Object(i["c"])(["users"])),methods:Object(a["a"])({},Object(i["b"])(["load_users"]))},ct=ut,ft=Object(f["a"])(ct,tt,et,!1,null,null,null),lt=ft.exports;s["default"].use(p["a"]);var dt=[{path:"/",name:"Login",component:Z},{path:"/home",name:"Home",component:T},{path:"/register",name:"Register",component:lt}],mt=new p["a"]({mode:"history",base:"/",routes:dt}),ht=mt;r("d3b7");s["default"].use(i["a"]);var pt=new i["a"].Store({state:{users:[],foods:[],locations:[]},mutations:{set_users:function(t,e){t.users=e},set_foods:function(t,e){t.foods=e},set_locations:function(t,e){t.locations=e},add_user:function(t,e){t.users.push(e)},update_user:function(t,e){for(var r=0;r<t.users.length;r++)if(t.users[r].id===parseInt(e.id)){t.users[r].is_active=e.user.is_active,t.users[r].orders=e.user.orders;break}},update_food:function(t,e){for(var r=0;r<t.foods.length;r++)if(t.foods[r].id===parseInt(e.id)){t.foods[r].ocena=e.food.ocena;break}}},actions:{load_users:function(t){var e=t.commit;fetch("http://localhost/api/users",{method:"get"}).then((function(t){if(!t.ok)throw t;return t.json()})).then((function(t){e("set_users",t)})).catch((function(t){"function"===typeof t.text?t.text().then((function(t){alert(t)})):alert(t)}))},load_foods:function(t){var e=t.commit;fetch("http://localhost/api/foods",{method:"get"}).then((function(t){if(!t.ok)throw t;return t.json()})).then((function(t){e("set_foods",t)})).catch((function(t){"function"===typeof t.text?t.text().then((function(t){alert(t)})):alert(t)}))},load_locations:function(t){var e=t.commit;fetch("http://localhost/api/locations",{method:"get"}).then((function(t){if(!t.ok)throw t;return t.json()})).then((function(t){e("set_locations",t)})).catch((function(t){"function"===typeof t.text?t.text().then((function(t){alert(t)})):alert(t)}))},new_user:function(t,e){var r=t.commit;fetch("http://localhost/api/users",{method:"post",headers:{"Content-Type":"application/json"},body:e}).then((function(t){if(!t.ok)throw t;return t.json()})).then((function(t){r("add_user",t)})).catch((function(t){"function"===typeof t.text?t.text().then((function(t){alert(t)})):alert(t)}))},change_user:function(t,e){var r=t.commit;fetch("http://localhost/api/user/".concat(e.id),{method:"put",headers:{"Content-Type":"application/json"},body:e.msg}).then((function(t){if(!t.ok)throw t;return t.json()})).then((function(t){r("update_user",{id:e.id,user:t})})).catch((function(t){"function"===typeof t.text?t.text().then((function(t){alert(t)})):alert(t)}))},change_food:function(t,e){var r=t.commit;fetch("http://localhost/api/food/".concat(e.id),{method:"put",headers:{"Content-Type":"application/json"},body:e.msg}).then((function(t){if(!t.ok)throw t;return t.json()})).then((function(t){r("update_food",{id:e.id,food:t})})).catch((function(t){"function"===typeof t.text?t.text().then((function(t){alert(t)})):alert(t)}))}}});s["default"].use(m["a"]),s["default"].use(h["a"]),s["default"].config.productionTip=!1,new s["default"]({router:ht,store:pt,render:function(t){return t(d)}}).$mount("#app")},"5ced":function(t,e,r){},6:function(t,e){},7:function(t,e){},8:function(t,e){},"85ec":function(t,e,r){},9:function(t,e){},cccb:function(t,e,r){"use strict";r("5ced")}});
//# sourceMappingURL=app.470b3f65.js.map